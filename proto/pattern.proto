syntax = "proto3";

package fax.compiler;

import "literal.proto";

// Pattern for pattern matching
message Pattern {
  oneof pattern_kind {
    WildPattern wild = 1;
    LiteralPattern lit = 2;
    VarPattern var = 3;
    TuplePattern tuple = 4;
    StructPattern struct = 5;
    EnumPattern enum = 6;
  }
}

message WildPattern {
  // Just an underscore, no additional data
}

message LiteralPattern {
  Literal value = 1;
}

message VarPattern {
  string name = 1;
}

message TuplePattern {
  repeated Pattern elements = 1;
}

message StructPattern {
  string struct_name = 1;
  repeated FieldPattern fields = 2;
}

message FieldPattern {
  string field_name = 1;
  Pattern pattern = 2;
}

message EnumPattern {
  string enum_name = 1;
  string variant_name = 2;
  repeated Pattern payload = 3;
}
